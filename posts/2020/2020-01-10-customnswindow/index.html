<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Custom NSWindow | Flying blind - coding nonsense</title><meta name=keywords content="macOS,Swift,NSWindow"><meta name=description content="If you&rsquo;re completely bored by gray-backgrounded NSWindow and wondering how to improve the UI with some colors, here we go with some helps. I highly recommend Luka Kerr&rsquo;s post on Github. We will build this: Step 1. Create a project in XCode with Swift and Storyboard. Step 2. Add a new NSWindowController.swift file to the project Step 3. Connect the new custom controller with Storyboard element Step 4. Add some code to our CustomWindowController."><meta name=author content="Szabolcs Tóth"><link rel=canonical href=https://kicsipixel.github.io/posts/2020/2020-01-10-customnswindow/><link crossorigin=anonymous href=/assets/css/stylesheet.min.48a18943c2fc15c38a372b8dde1f5e5dc0bc64fa6cb90f5a817d2f8c76b7f3ae.css integrity="sha256-SKGJQ8L8FcOKNyuN3h9eXcC8ZPpsuQ9agX0vjHa3864=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://kicsipixel.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://kicsipixel.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://kicsipixel.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://kicsipixel.github.io/apple-touch-icon.png><link rel=mask-icon href=https://kicsipixel.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Custom NSWindow"><meta property="og:description" content="If you&rsquo;re completely bored by gray-backgrounded NSWindow and wondering how to improve the UI with some colors, here we go with some helps. I highly recommend Luka Kerr&rsquo;s post on Github. We will build this: Step 1. Create a project in XCode with Swift and Storyboard. Step 2. Add a new NSWindowController.swift file to the project Step 3. Connect the new custom controller with Storyboard element Step 4. Add some code to our CustomWindowController."><meta property="og:type" content="article"><meta property="og:url" content="https://kicsipixel.github.io/posts/2020/2020-01-10-customnswindow/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-01-10T00:00:00+00:00"><meta property="article:modified_time" content="2020-01-10T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Custom NSWindow"><meta name=twitter:description content="If you&rsquo;re completely bored by gray-backgrounded NSWindow and wondering how to improve the UI with some colors, here we go with some helps. I highly recommend Luka Kerr&rsquo;s post on Github. We will build this: Step 1. Create a project in XCode with Swift and Storyboard. Step 2. Add a new NSWindowController.swift file to the project Step 3. Connect the new custom controller with Storyboard element Step 4. Add some code to our CustomWindowController."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://kicsipixel.github.io/posts/"},{"@type":"ListItem","position":3,"name":"Custom NSWindow","item":"https://kicsipixel.github.io/posts/2020/2020-01-10-customnswindow/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Custom NSWindow","name":"Custom NSWindow","description":"If you\u0026rsquo;re completely bored by gray-backgrounded NSWindow and wondering how to improve the UI with some colors, here we go with some helps. I highly recommend Luka Kerr\u0026rsquo;s post on Github. We will build this: Step 1. Create a project in XCode with Swift and Storyboard. Step 2. Add a new NSWindowController.swift file to the project Step 3. Connect the new custom controller with Storyboard element Step 4. Add some code to our CustomWindowController.","keywords":["macOS","Swift","NSWindow"],"articleBody":"If you’re completely bored by gray-backgrounded NSWindow and wondering how to improve the UI with some colors, here we go with some helps. I highly recommend Luka Kerr’s post on Github. We will build this: Step 1. Create a project in XCode with Swift and Storyboard. Step 2. Add a new NSWindowController.swift file to the project Step 3. Connect the new custom controller with Storyboard element Step 4. Add some code to our CustomWindowController.swift\noverride func windowDidLoad() { super.windowDidLoad() self.configureWindowAppearance() } func configureWindowAppearance() { if let window = window { if let view = window.contentView { view.wantsLayer = true view.layer?.backgroundColor = NSColor.white.cgColor } } } If we run our app, we’ll see the following, still ugly but at least the background is white now… We don’t need the Window title, so we add configureWindowAppearance() method the following:\nwindow.titleVisibility = .hidden Step 5. Add a CustomView on Storyboard to our ViewController and add an NSView Cocoa class file. Don’t forget to add our new file to our CustomView. Run again our app to check, where we are. Not bad, but can be much-much better. Step 6. Remove titlebar, since can draw nicer controllers. There are two ways to do it.\nwindow.styleMask.remove(.titled) It seems to work, but actually not. I will show you later, this code will break your NSTextField.\nwindow.styleMask.remove(.closable) // close button (red) window.styleMask.remove(.miniaturizable) // miniaturize button (yellow) window.styleMask.remove(.resizable) // resize button (green) This code removes the buttons but titlebar stays there, so add these two lines more: ```swift window.titlebarAppearsTransparent = true window.styleMask.insert(.fullSizeContentView) Step 7. Add an Image button to the Storyboard, then create a new NSButton class and connect them. You will need 3 versions of the button image. ![custombutton](/images/Custom close button.png)\nExport the images one-by-one as .pdf and add to project assets.\nStep 8. Jerry Shan made an excellent video about custon NSButton. After watching it, add the following code to your CustomCloseButton.swift\nvar mouseIsInside = false override func awakeFromNib() { self.image = NSImage(named:\"Custom close button\") let trackingArea = NSTrackingArea(rect: self.bounds, options: NSTrackingArea.Options(rawValue: 129), owner: self, userInfo: nil) self.addTrackingArea(trackingArea) } override func mouseEntered(with event: NSEvent) { self.image = NSImage(named:\"Custom on-mouse close button\") mouseIsInside = true } override func mouseExited(with event: NSEvent) { self.image = NSImage(named:\"Custom close button\") mouseIsInside = false } override func mouseDown(with event: NSEvent) { self.image = NSImage(named:\"Custom pressed close button\") } override func mouseUp(with event: NSEvent) { if mouseIsInside { NSApplication.shared.terminate(nil) } else { self.image = NSImage(named:\"Custom close button\") } } Step 9. Run the code for the final result. Source code: Github\n","wordCount":"418","inLanguage":"en","datePublished":"2020-01-10T00:00:00Z","dateModified":"2020-01-10T00:00:00Z","author":[{"@type":"Person","name":"Szabolcs Tóth"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://kicsipixel.github.io/posts/2020/2020-01-10-customnswindow/"},"publisher":{"@type":"Organization","name":"Flying blind - coding nonsense","logo":{"@type":"ImageObject","url":"https://kicsipixel.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://kicsipixel.github.io accesskey=h title="Flying blind - coding nonsense (Alt + H)">Flying blind - coding nonsense</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://kicsipixel.github.io>Home</a>&nbsp;»&nbsp;<a href=https://kicsipixel.github.io/posts/>Posts</a></div><h1 class=post-title>Custom NSWindow</h1><div class=post-meta><span title='2020-01-10 00:00:00 +0000 UTC'>January 10, 2020</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Szabolcs Tóth</div></header><div class=post-content><p>If you&rsquo;re completely bored by gray-backgrounded NSWindow and wondering how to improve the UI with some colors, here we go with some helps. I highly recommend <a href=https://github.com/lukakerr/NSWindowStyles>Luka Kerr&rsquo;s post</a> on Github.
We will build this:
<img loading=lazy src=/images/NSWindow.png alt=final></p><p><strong>Step 1.</strong>
Create a project in XCode with Swift and Storyboard.
<img loading=lazy src=/images/NSWindow1.png alt=create></p><p><strong>Step 2.</strong>
Add a new <code>NSWindowController.swift</code> file to the project
<img loading=lazy src=/images/NSWindow2.png alt=add></p><p><strong>Step 3.</strong>
Connect the new custom controller with Storyboard element
<img loading=lazy src=/images/NSWindow3.png alt=connect></p><p><strong>Step 4.</strong>
Add some code to our <code>CustomWindowController.swift</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>windowDidLoad</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>.windowDidLoad()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.configureWindowAppearance()
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>configureWindowAppearance</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> window = window {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>let</span> view = window.contentView {
</span></span><span style=display:flex><span>                view.wantsLayer = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>                view.layer?.backgroundColor = NSColor.white.cgColor
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>If we run our app, we&rsquo;ll see the following, still ugly but at least the background is white now&mldr;
<img loading=lazy src=/images/NSWindow4.png alt=firstrun></p><p>We don&rsquo;t need the Window title, so we add <code>configureWindowAppearance()</code> method the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span>    window.titleVisibility = .hidden
</span></span></code></pre></div><p><strong>Step 5.</strong>
Add a CustomView on Storyboard to our ViewController and add an NSView Cocoa class file.
<img loading=lazy src=/images/NSWindow5.png alt=customview>
<img loading=lazy src=/images/NSWindow6.png alt=addnsviewclass></p><p>Don&rsquo;t forget to add our new file to our CustomView.
<img loading=lazy src=/images/NSWindow7.png alt=connectview></p><p>Run again our app to check, where we are. Not bad, but can be much-much better.
<img loading=lazy src=/images/NSWindow8.png alt=secondrun></p><p><strong>Step 6.</strong>
Remove titlebar, since can draw nicer controllers. There are two ways to do it.</p><ol><li><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span> window.styleMask.remove(.titled)
</span></span></code></pre></div><p>It seems to work, but actually not. I will show you later, this code will break your NSTextField.</p></li><li><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span> window.styleMask.remove(.closable) <span style=color:#75715e>// close button (red)</span>
</span></span><span style=display:flex><span> window.styleMask.remove(.miniaturizable) <span style=color:#75715e>// miniaturize button (yellow)</span>
</span></span><span style=display:flex><span> window.styleMask.remove(.resizable) <span style=color:#75715e>// resize button (green)</span>
</span></span></code></pre></div></li></ol><pre tabindex=0><code>This code removes the buttons but titlebar stays there, so add these two lines more:

```swift
    window.titlebarAppearsTransparent = true
    window.styleMask.insert(.fullSizeContentView)
</code></pre><p><img loading=lazy src=/images/NSWindow9.png alt=thirdrun></p><p><strong>Step 7.</strong>
Add an Image button to the Storyboard, then create a new NSButton class and connect them.
<img loading=lazy src=/images/NSWindow10.png alt=nsbutton></p><p>You will need 3 versions of the button image.
![custombutton](/images/Custom close button.png)</p><p>Export the images one-by-one as .pdf and add to project assets.</p><p><strong>Step 8.</strong>
Jerry Shan made an <a href="https://www.youtube.com/watch?v=2vSB40P9ZSg">excellent video</a> about custon NSButton. After watching it, add the following code to your CustomCloseButton.swift</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#66d9ef>var</span> mouseIsInside = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>awakeFromNib</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>self</span>.image = NSImage(named:<span style=color:#e6db74>&#34;Custom close button&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> trackingArea = NSTrackingArea(rect: <span style=color:#66d9ef>self</span>.bounds, options: NSTrackingArea.Options(rawValue: <span style=color:#ae81ff>129</span>), owner: <span style=color:#66d9ef>self</span>, userInfo: <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.addTrackingArea(trackingArea)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>mouseEntered</span>(with event: NSEvent) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>self</span>.image = NSImage(named:<span style=color:#e6db74>&#34;Custom on-mouse close button&#34;</span>)
</span></span><span style=display:flex><span>        mouseIsInside = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>mouseExited</span>(with event: NSEvent) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>self</span>.image = NSImage(named:<span style=color:#e6db74>&#34;Custom close button&#34;</span>)
</span></span><span style=display:flex><span>        mouseIsInside = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>mouseDown</span>(with event: NSEvent) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>self</span>.image = NSImage(named:<span style=color:#e6db74>&#34;Custom pressed close button&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>mouseUp</span>(with event: NSEvent) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> mouseIsInside {
</span></span><span style=display:flex><span>            NSApplication.shared.terminate(<span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>self</span>.image = NSImage(named:<span style=color:#e6db74>&#34;Custom close button&#34;</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p><strong>Step 9.</strong>
Run the code for the final result.
<img loading=lazy src=/images/NSWindow.png alt=final></p><p>Source code: <a href=https://github.com/kicsipixel/Custom-Cocoa-Controllers/tree/master/CustomWindow>Github</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://kicsipixel.github.io/tags/macOS/>macOS</a></li><li><a href=https://kicsipixel.github.io/tags/Swift/>Swift</a></li><li><a href=https://kicsipixel.github.io/tags/NSWindow/>NSWindow</a></li></ul><nav class=paginav><a class=prev href=https://kicsipixel.github.io/posts/2020/2020-01-11-nostoryboard/><span class=title>« Prev Page</span><br><span>NSWindow without Storyboard</span></a>
<a class=next href=https://kicsipixel.github.io/posts/2019/2019-11-30-hellopoly/><span class=title>Next Page »</span><br><span>HelloPoly - Stanford University CS193P iPhone application development</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://kicsipixel.github.io>Flying blind - coding nonsense</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>